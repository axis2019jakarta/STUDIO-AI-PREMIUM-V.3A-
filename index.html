<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="monetag" content="c61cf917a91abd7c95cd324339a7107d">
    <title>Nabila Studio - Suite AI Kreatif Terlengkap (Novel, Gambar, Podcast, Jawaban, Lirik, Puisi, Roda Hiburan)</title>
    <meta name="description" content="Selamat datang di Nabila Studio. Hasilkan novel dengan gaya penulis ternama, gambar dari teks, podcast studio, dapatkan jawaban soal, ciptakan lirik, puisi, dan mainkan Roda Hiburan. Didukung oleh Cohere, Stability AI, ElevenLabs.">
    <meta name="keywords" content="AI, Nabila Studio, AI Image Generator, AI Novel Writer, Gaya Penulis, Enny Arrow, Sandra Brown, Asmaraman S. Kho Ping Hoo, Roda Keberuntungan, Podcast Generator, AI Penjawab Soal, Generator Lirik, Generator Puisi, Beli Kunci API, Cohere, Stability AI, ElevenLabs, Pixabay, Penulis, Podcaster, Kreator, Kecerdasan Buatan">
    <meta name="author" content="Nabila Studio Development">
    <meta name="robots" content="index, follow">

    <link rel="icon" href="https://img.icons8.com/fluency/48/prototyping-process.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Orbitron:wght@800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        :root {
            --bg-dark: #10101a; --bg-light: #1d1d2b; --sidebar-bg: #151521;
            --primary-glow: #a855f7; --secondary-glow: #00e1ff; --accent-glow: #ff55a5;
            --text-light: #f0f0f0; --text-dark: #a0a0b0; --border-color: rgba(255, 255, 255, 0.1);
            --warning-color: #ffc107; --success-color: #28a745; --danger-color: #dc3545;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Poppins', sans-serif; background-color: var(--bg-dark); color: var(--text-light);
            background-image: radial-gradient(circle at 1% 1%, var(--primary-glow), transparent 30%),
                              radial-gradient(circle at 99% 99%, var(--secondary-glow), transparent 30%),
                              radial-gradient(circle at 50% 50%, var(--accent-glow), transparent 40%);
            background-attachment: fixed; overflow-x: hidden;
        }
        .info-ticker {
            background-color: var(--primary-glow); color: white; padding: 0.5rem; text-align: center;
            font-weight: 600; font-size: 0.9em; position: fixed; top: 0; width: 100%; z-index: 1002;
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.4);
        }
        .page-wrapper { display: flex; padding-top: 40px; }
        .sidebar {
            width: 260px; background-color: var(--sidebar-bg); position: fixed; top: 40px; left: 0;
            height: calc(100vh - 40px); padding: 1.5rem 1rem; border-right: 1px solid var(--border-color);
            display: flex; flex-direction: column; z-index: 1001; transition: transform 0.3s ease-in-out;
        }
        .sidebar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
        .sidebar-header h1 {
            font-family: 'Orbitron', sans-serif; font-size: 1.5em;
            background: linear-gradient(90deg, var(--primary-glow), var(--secondary-glow));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .sidebar-header .close-btn { font-size: 1.5rem; color: var(--text-dark); cursor: pointer; display: none; }
        .sidebar-nav { overflow-y: auto; }
        .sidebar-nav a {
            display: flex; align-items: center; padding: 1rem; margin-bottom: 0.5rem; color: var(--text-dark);
            text-decoration: none; border-radius: 8px; font-weight: 600; transition: all 0.3s ease;
        }
        .sidebar-nav a i { width: 30px; font-size: 1.2em; margin-right: 1rem; }
        .sidebar-nav a:hover { background-color: var(--bg-light); color: var(--text-light); }
        .sidebar-nav a.active { background-color: var(--bg-light); color: var(--text-light); box-shadow: 0 0 15px var(--primary-glow); }
        .main-content-area { margin-left: 260px; width: calc(100% - 260px); padding: 2rem; animation: fadeIn 1s ease-out; position: relative;}
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .menu-toggle {
            display: none; position: fixed; top: 55px; left: 15px; background-color: var(--bg-light);
            color: var(--text-light); border: 1px solid var(--border-color); border-radius: 50%;
            width: 45px; height: 45px; font-size: 1.2rem; justify-content: center; align-items: center;
            cursor: pointer; z-index: 1002;
        }
        .page { display: none; }
        .page.active { display: block; animation: contentFadeIn 0.5s; }
        @keyframes contentFadeIn { from { opacity: 0; } to { opacity: 1; } }
        .page-header { margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color); }
        .page-header h2 { font-size: 2.2em; font-weight: 700; }
        .page-header p { color: var(--text-dark); }
        .form-section { background-color: var(--bg-light); padding: 1.5rem; border-radius: 15px; margin-bottom: 1.5rem; border: 1px solid var(--border-color); }
        .form-section h3 { font-size: 1.5em; margin-bottom: 1rem; border-left: 4px solid var(--primary-glow); padding-left: 10px; }
        .input-group { margin-bottom: 1rem; }
        .input-group label { display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-dark); }
        .input-group input, .input-group textarea, .input-group select {
            width: 100%; padding: 0.8rem; background-color: var(--bg-dark); border: 1px solid var(--border-color);
            border-radius: 8px; color: var(--text-light); font-size: 1em; transition: all 0.3s ease;
        }
        .input-group input:focus, .input-group textarea:focus, .input-group select:focus { outline: none; border-color: var(--secondary-glow); box-shadow: 0 0 10px var(--secondary-glow); }
        textarea { resize: vertical; min-height: 120px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; }
        .btn {
            display: inline-block; padding: 1rem; font-size: 1.2em; font-weight: 700; text-align: center;
            border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden;
        }
        .btn-primary { background: linear-gradient(90deg, var(--primary-glow), var(--accent-glow)); color: white; width: 100%;}
        .btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); }
        .btn:disabled { background: var(--text-dark); cursor: not-allowed; transform: translateY(0); box-shadow: none; }
        .output-pane { margin-top: 2rem; }
        .output-pane h3 { font-size: 1.5em; margin-bottom: 1rem; border-left: 4px solid var(--secondary-glow); padding-left: 10px; }
        .output-area { width: 100%; min-height: 400px; background-color: #10101a; color: #f0f0f0; border: 1px solid var(--border-color); border-radius: 8px; padding: 1rem; font-size: 1.1em; line-height: 1.6; }
        #image-output-area {
            display: flex; justify-content: center; align-items: center; width: 100%; min-height: 400px;
            background-color: #10101a; border: 1px solid var(--border-color); border-radius: 8px;
            padding: 1rem; overflow: hidden;
        }
        #image-output-area img { max-width: 100%; max-height: 512px; height: auto; object-fit: contain; border-radius: 8px; }
        .action-buttons { display: flex; gap: 1rem; margin-top: 1rem; justify-content: flex-end; }
        .btn-secondary { background: var(--bg-light); color: var(--text-light); border: 1px solid var(--border-color); padding: 0.5rem 1rem; font-size: 0.9em; width: auto; }
        .btn-secondary:hover { border-color: var(--primary-glow); color: var(--primary-glow); }
        .api-status-list { list-style: none; padding: 0; }
        .api-status-list li { display: flex; justify-content: space-between; align-items: center; background: var(--bg-dark); padding: 0.8rem 1rem; border-radius: 8px; margin-bottom: 0.5rem; }
        .api-status-badge { font-weight: bold; padding: 0.3rem 0.6rem; border-radius: 5px; font-size: 0.8em; }
        .status-ok { background-color: var(--success-color); color: white; }
        .status-missing { background-color: var(--danger-color); color: white; }
        .api-status-list a { color: var(--secondary-glow); text-decoration: none; font-weight: bold; }
        .whatsapp-fab {
            position: fixed; bottom: 20px; right: 20px; background-color: #25D366; color: white;
            width: 60px; height: 60px; border-radius: 50%; display: flex; justify-content: center;
            align-items: center; font-size: 2em; text-decoration: none; box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
            transition: all 0.3s ease; z-index: 1001;
        }
        .whatsapp-fab:hover { transform: scale(1.1) rotate(10deg); box-shadow: 0 6px 20px rgba(37, 211, 102, 0.6); }
        .disclaimer-box {
            padding: 1rem; background-color: rgba(255, 193, 7, 0.1); border-left: 5px solid var(--warning-color);
            border-radius: 8px; margin-bottom: 1.5rem; color: var(--warning-color);
        }
        #podcast-audio-player { width: 100%; margin-top: 1rem; }
        #image-preview-container { width: 100%; min-height: 150px; border: 2px dashed var(--border-color); border-radius: 8px; display: flex; justify-content: center; align-items: center; padding: 1rem; }
        #image-preview { max-width: 100%; max-height: 250px; border-radius: 5px; }
        #map-container { width: 100%; height: 400px; border-radius: 15px; overflow: hidden; border: 2px solid var(--border-color); }
        #map-container iframe { width: 100%; height: 100%; border: 0; }

        /* Wheel of Fortune Styles */
        .wheel-container { display: flex; justify-content: center; align-items: center; flex-direction: column; gap: 2rem; }
        #wheel-wrapper { position: relative; width: 400px; height: 400px; }
        #wheel { width: 100%; height: 100%; border-radius: 50%; background-image: conic-gradient( from 0deg, #ffc107, #ff9800, #ff5722, #f44336, #e91e63, #9c27b0, #673ab7, #3f51b5, #2196f3, #03a9f4, #00bcd4, #009688, #4caf50, #8bc34a, #cddc39, #ffeb3b, #ffc107 ); border: 10px solid var(--bg-light); transition: transform 6s cubic-bezier(0.25, 0.1, 0.25, 1); }
        #wheel-pointer { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -100%); width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent; border-top: 40px solid var(--accent-glow); z-index: 2;}
        .wheel-segment { position: absolute; width: 50%; height: 50%; left: 50%; top: 0; transform-origin: 0% 100%; display: flex; justify-content: center; align-items: center; }
        .wheel-segment .icon { transform: rotate(90deg) translate(100px) rotate(-90deg); width: 30px; height: 30px; }
        .score-display { font-size: 2em; font-weight: bold; color: var(--secondary-glow); text-shadow: 0 0 10px var(--secondary-glow); }

        @media (max-width: 992px) {
            .sidebar { transform: translateX(-100%); z-index: 1003; top: 0; height: 100vh; }
            .sidebar.open { transform: translateX(0); box-shadow: 5px 0 25px rgba(0,0,0,0.3); }
            .sidebar-header .close-btn { display: block; }
            .main-content-area { margin-left: 0; width: 100%; padding: 1.5rem; }
            .menu-toggle { display: flex; }
            .page-wrapper { padding-top: 40px; }
            .grid, .payment-container { grid-template-columns: 1fr; }
            #wheel-wrapper { width: 300px; height: 300px; }
        }
    </style>
</head>
<body>

    <div class="info-ticker"><marquee>Selamat Datang di Nabila Studio! Platform AI Kreatif Terlengkap dengan Gaya Penulis & Roda Hiburan. Beli Kunci API Premium untuk akses penuh.</marquee></div>

    <div class="page-wrapper">
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header"><h1><i class="fa-solid fa-brain"></i>Nabila Studio</h1><i class="fa-solid fa-times close-btn" id="close-menu"></i></div>
            <div class="sidebar-nav">
                <a href="#" class="nav-link active" data-page="page-dashboard"><i class="fa-solid fa-house-chimney"></i> Dashboard</a>
                <a href="#" class="nav-link" data-page="page-wheel"><i class="fa-solid fa-dharmachakra"></i> Roda Hiburan</a>
                <a href="#" class="nav-link" data-page="page-image"><i class="fa-solid fa-image"></i> AI Image Generator</a>
                <a href="#" class="nav-link" data-page="page-writer"><i class="fa-solid fa-book-sparkles"></i> AI Novel Writer</a>
                <a href="#" class="nav-link" data-page="page-podcast"><i class="fa-solid fa-podcast"></i> Studio Podcast</a>
                <a href="#" class="nav-link" data-page="page-qa"><i class="fa-solid fa-question-circle"></i> AI Penjawab Soal</a>
                <a href="#" class="nav-link" data-page="page-lyrics"><i class="fa-solid fa-music"></i> Generator Lirik Lagu</a>
                <a href="#" class="nav-link" data-page="page-poem"><i class="fa-solid fa-feather-alt"></i> Generator Puisi</a>
                <a href="#" class="nav-link" data-page="page-ramalan"><i class="fa-solid fa-wand-magic"></i> Generator Ramalan</a>
                <a href="#" class="nav-link" data-page="page-payment"><i class="fa-solid fa-wallet"></i> Beli Kunci API</a>
                <a href="#" class="nav-link" data-page="page-keys"><i class="fa-solid fa-key"></i> Manajemen Kunci API</a>
                <a href="#" class="nav-link" data-page="page-about"><i class="fa-solid fa-info-circle"></i> Tentang & Kontak</a>
            </div>
        </nav>

        <main class="main-content-area">
            <div class="menu-toggle" id="menu-toggle"><i class="fa-solid fa-bars"></i></div>
            
            <div id="page-dashboard" class="page active">
                <div class="page-header"><h2>Dashboard</h2><p>Selamat datang kembali, Kreator! Inilah pusat kendali kreatif Anda.</p></div>
                <div class="form-section"><h3><i class="fa-solid fa-check-circle"></i> Status Kunci API</h3><ul class="api-status-list" id="api-status-list"></ul></div>
                <div class="form-section"><h3><i class="fa-solid fa-rocket"></i> Akses Cepat</h3><div class="grid">
                    <button class="btn" onclick="navigateToPage('page-wheel')">Mainkan Roda Hiburan</button>
                    <button class="btn" onclick="navigateToPage('page-writer')">Tulis Novel Gaya Pro</button>
                    <button class="btn" onclick="navigateToPage('page-podcast')">Buat Podcast AI</button>
                    <button class="btn" onclick="navigateToPage('page-keys')">Atur Kunci API</button>
                </div></div>
            </div>

            <div id="page-wheel" class="page">
                <div class="page-header"><h2>Roda Hiburan</h2><p>Putar roda dan lihat keberuntungan apa yang Anda dapatkan hari ini!</p></div>
                <div class="form-section text-center" style="text-align:center;">
                    <h3>Total Poin Hiburan Anda</h3>
                    <p id="total-score" class="score-display">0</p>
                </div>
                <div class="wheel-container">
                    <div id="wheel-wrapper">
                        <div id="wheel"></div>
                        <div id="wheel-pointer"></div>
                    </div>
                    <button id="spin-btn" class="btn btn-primary" style="width: 200px;"><i class="fa-solid fa-play"></i> PUTAR</button>
                </div>
            </div>

            <div id="page-image" class="page">
                <div class="page-header"><h2>AI Image Generator</h2><p>Ubah teks menjadi gambar menakjubkan dengan kekuatan AI.</p></div>
                <div class="form-section">
                    <h3><i class="fa-solid fa-pencil-alt"></i> Buat Gambar Anda</h3>
                    <div class="input-group"><label for="image-prompt">Deskripsi Gambar (Prompt)</label><textarea id="image-prompt" placeholder="Contoh: seekor kucing astronot mengendarai sepeda di bulan, gaya photorealistic"></textarea></div>
                    <button id="image-generate-btn" class="btn btn-primary" onclick="generateImage()"><i class="fa-solid fa-magic-sparkles"></i> Buat Gambar</button>
                </div>
                <div class="output-pane"><h3><i class="fa-solid fa-image"></i> Hasil Gambar</h3>
                    <div id="image-output-area"><p>Gambar Anda akan muncul di sini...</p></div>
                    <div class="action-buttons">
                        <button class="btn btn-secondary" onclick="downloadImage()"><i class="fa-solid fa-download"></i> Unduh</button>
                    </div>
                </div>
            </div>

            <div id="page-writer" class="page">
                <div class="page-header"><h2>AI Novel Writer (Pro)</h2><p>Ciptakan novel dengan gaya penulis favorit Anda, bab demi bab dengan target ribuan kata.</p></div>
                <div class="form-section">
                    <h3><i class="fa-solid fa-lightbulb"></i> Langkah 1: Buat Premis Cerita</h3>
                    <div class="grid">
                        <div class="input-group">
                            <label for="writer-style">Pilih Gaya Penulis</label>
                            <select id="writer-style">
                                <option value="Default">Gaya Standar (Deskriptif & Jelas)</option>
                                <option value="Enny Arrow">Enny Arrow (Romantis, Liris, Penuh Emosi)</option>
                                <option value="Sandra Brown">Sandra Brown (Suspense, Penuh Ketegangan, Twist)</option>
                                <option value="Asmaraman S. Kho Ping Hoo">Asmaraman S. Kho Ping Hoo (Silat, Sejarah, Puitis)</option>
                                <option value="Tere Liye">Tere Liye (Imajinatif, Menyentuh Hati, Pesan Moral)</option>
                                <option value="Dee Lestari">Dee Lestari (Filosofis, Sains, Spiritual, Kompleks)</option>
                                <option value="Pramoedya Ananta Toer">Pramoedya Ananta Toer (Realisme Sosialis, Historis, Detail)</option>
                                <option value="Agatha Christie">Agatha Christie (Misteri, Detektif, Plot Cerdas)</option>
                                <option value="J.K. Rowling">J.K. Rowling (Fantasi, Pembangunan Dunia, Petualangan)</option>
                                <option value="Stephen King">Stephen King (Horor, Psikologis, Karakter Mendalam)</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-group"><label for="writer-prompt">Jelaskan ide utama novel Anda</label><textarea id="writer-prompt" placeholder="Contoh: Seorang detektif di Jakarta tahun 2049 yang harus memecahkan kasus pembunuhan oleh android, sementara ia sendiri menyembunyikan rahasia besar. Genre: Sci-fi Noir."></textarea></div>
                    <button id="writer-generate-btn" class="btn btn-primary" onclick="generateNovel()"><i class="fa-solid fa-play-circle"></i> Mulai Cerita & Buat Bab 1</button>
                </div>
                <div class="output-pane"><h3><i class="fa-solid fa-book-open"></i> Naskah Novel Anda</h3>
                    <textarea id="writer-output" class="output-area" readonly placeholder="Cerita Anda akan muncul di sini..."></textarea>
                    <div class="action-buttons">
                        <button id="writer-continue-btn" class="btn btn-secondary" onclick="continueNovel()" style="display: none;"><i class="fa-solid fa-forward"></i> Lanjutkan ke Bab Selanjutnya</button>
                        <button class="btn btn-secondary" onclick="copyToClipboard('writer-output')"><i class="fa-solid fa-copy"></i> Salin</button>
                        <button class="btn btn-secondary" onclick="downloadTextFile('writer-output', 'Novel_AI.txt')"><i class="fa-solid fa-download"></i> Unduh</button>
                    </div>
                </div>
            </div>
            
            <div id="page-podcast" class="page">
                 <div class="page-header"><h2>Studio Podcast AI</h2><p>Buat podcast dari teks dengan suara AI realistis dan musik latar.</p></div>
                 <div class="form-section">
                     <h3><i class="fa-solid fa-pen-nib"></i> Langkah 1: Buat atau Masukkan Naskah</h3>
                     <div class="input-group"><label for="podcast-script">Naskah Podcast</label><textarea id="podcast-script" placeholder="Tulis atau tempel naskah podcast Anda di sini..."></textarea></div>
                     <button id="podcast-script-btn" class="btn btn-primary" onclick="generatePodcastScript()"><i class="fa-solid fa-comment-dots"></i> Cek & Proses Naskah</button>
                 </div>
                 <div class="form-section">
                     <h3><i class="fa-solid fa-microphone-lines"></i> Langkah 2: Pilih Suara & Musik</h3>
                     <div class="grid">
                         <div class="input-group"><label for="podcast-voice">Pilih Suara AI</label><select id="podcast-voice" disabled><option>Pilih suara...</option></select></div>
                         <div class="input-group"><label for="podcast-music">Genre Musik Latar (Opsional)</label><input type="text" id="podcast-music" placeholder="Contoh: lo-fi, ambient, epic" disabled></div>
                     </div>
                 </div>
                 <div class="form-section">
                     <h3><i class="fa-solid fa-play"></i> Langkah 3: Generate Audio</h3>
                     <button id="podcast-generate-btn" class="btn btn-primary" onclick="generatePodcastAudio()" disabled><i class="fa-solid fa-cogs"></i> Buat Audio Podcast</button>
                 </div>
                 <div class="output-pane"><h3><i class="fa-solid fa-headphones"></i> Dengarkan Hasilnya</h3>
                     <audio id="podcast-audio-player" controls style="display:none;"></audio>
                     <p id="podcast-placeholder">Audio podcast Anda akan muncul di sini...</p>
                 </div>
            </div>
            
            <div id="page-qa" class="page">
                <div class="page-header"><h2>AI Penjawab Soal</h2><p>Dapatkan jawaban dan penjelasan untuk pertanyaan akademis atau umum.</p></div>
                <div class="form-section">
                    <h3><i class="fa-solid fa-question"></i> Ajukan Pertanyaan Anda</h3>
                    <div class="input-group"><label for="qa-prompt">Pertanyaan</label><textarea id="qa-prompt" placeholder="Contoh: Jelaskan proses fotosintesis secara sederhana."></textarea></div>
                    <button class="btn btn-primary" onclick="generateGeneric('qa')"><i class="fa-solid fa-lightbulb"></i> Cari Jawaban</button>
                </div>
                <div class="output-pane"><h3><i class="fa-solid fa-align-left"></i> Jawaban AI</h3>
                    <textarea id="qa-output" class="output-area" readonly placeholder="Jawaban akan muncul di sini..."></textarea>
                    <div class="action-buttons"><button class="btn btn-secondary" onclick="copyToClipboard('qa-output')"><i class="fa-solid fa-copy"></i> Salin</button></div>
                </div>
            </div>

            <div id="page-lyrics" class="page">
                <div class="page-header"><h2>Generator Lirik Lagu</h2><p>Buat lirik lagu orisinal berdasarkan ide, genre, dan mood Anda.</p></div>
                <div class="form-section">
                    <h3><i class="fa-solid fa-guitar"></i> Rancang Lirik Anda</h3>
                    <div class="input-group"><label for="lyrics-prompt">Deskripsi Lagu</label><textarea id="lyrics-prompt" placeholder="Contoh: Lirik lagu pop ballad tentang perpisahan di senja hari, dengan nuansa melankolis namun penuh harapan."></textarea></div>
                    <button class="btn btn-primary" onclick="generateGeneric('lyrics')"><i class="fa-solid fa-feather"></i> Tulis Lirik</button>
                </div>
                <div class="output-pane"><h3><i class="fa-solid fa-music"></i> Hasil Lirik</h3>
                    <textarea id="lyrics-output" class="output-area" readonly placeholder="Lirik lagu akan muncul di sini..."></textarea>
                    <div class="action-buttons"><button class="btn btn-secondary" onclick="copyToClipboard('lyrics-output')"><i class="fa-solid fa-copy"></i> Salin</button></div>
                </div>
            </div>

            <div id="page-poem" class="page">
                <div class="page-header"><h2>Generator Puisi</h2><p>Ciptakan puisi indah dengan berbagai tema dan gaya.</p></div>
                <div class="form-section">
                    <h3><i class="fa-solid fa-pen-fancy"></i> Ciptakan Puisi Anda</h3>
                    <div class="input-group"><label for="poem-prompt">Ide Puisi</label><textarea id="poem-prompt" placeholder="Contoh: Puisi tentang keheningan malam di pegunungan, dengan gaya bebas."></textarea></div>
                    <button class="btn btn-primary" onclick="generateGeneric('poem')"><i class="fa-solid fa-book-open-reader"></i> Buat Puisi</button>
                </div>
                <div class="output-pane"><h3><i class="fa-solid fa-scroll"></i> Hasil Puisi</h3>
                    <textarea id="poem-output" class="output-area" readonly placeholder="Puisi akan muncul di sini..."></textarea>
                    <div class="action-buttons"><button class="btn btn-secondary" onclick="copyToClipboard('poem-output')"><i class="fa-solid fa-copy"></i> Salin</button></div>
                </div>
            </div>

            <div id="page-ramalan" class="page">
                <div class="page-header"><h2>Generator Ramalan</h2><p>Dapatkan ramalan unik dan menghibur (untuk tujuan hiburan).</p></div>
                <div class="form-section">
                     <h3><i class="fa-solid fa-crystal-ball"></i> Lihat Masa Depan Anda</h3>
                     <div class="input-group"><label for="ramalan-prompt">Fokus Ramalan</label><input type="text" id="ramalan-prompt" placeholder="Contoh: percintaan, karier, keuangan minggu ini"></div>
                     <button class="btn btn-primary" onclick="generateGeneric('ramalan')"><i class="fa-solid fa-wand-magic-sparkles"></i> Terawang</button>
                 </div>
                 <div class="output-pane"><h3><i class="fa-solid fa-star"></i> Ramalan Anda</h3>
                     <textarea id="ramalan-output" class="output-area" readonly placeholder="Ramalan Anda akan muncul di sini..."></textarea>
                     <div class="action-buttons"><button class="btn btn-secondary" onclick="copyToClipboard('ramalan-output')"><i class="fa-solid fa-copy"></i> Salin</button></div>
                 </div>
            </div>
            
            <div id="page-payment" class="page">
                 <div class="page-header"><h2>Beli Kunci API Premium</h2><p>Dapatkan akses penuh ke semua fitur dengan membeli Kunci API premium.</p></div>
                 <div class="payment-container grid">
                     <div class="form-section">
                         <h3><i class="fa-solid fa-file-invoice-dollar"></i> Langkah 1: Transfer</h3>
                         <p style="margin-bottom: 1rem;">Lakukan transfer sebesar <strong>Rp 15.000,-</strong> untuk Kunci API Premium (Akses Seumur Hidup) ke rekening berikut:</p>
                         <ul style="list-style: none; padding-left: 0; line-height: 1.8;">
                             <li><strong><i class="fa-solid fa-university"></i> E-WALLET:</strong> GOPAY</li>
                             <li><strong><i class="fa-solid fa-id-card"></i> No. Rekening:</strong> 0895340205302</li>
                             <li><strong><i class="fa-solid fa-user"></i> Atas Nama:</strong> Nabila Studio Development</li>
                         </ul>
                     </div>
                     <div class="form-section">
                         <h3><i class="fa-solid fa-paper-plane"></i> Langkah 2: Konfirmasi</h3>
                         <p style="margin-bottom: 1rem;">Setelah transfer, isi formulir di bawah ini dan unggah bukti pembayaran. Kunci API akan dikirim ke email Anda dalam 1x24 jam.</p>
                         <form id="payment-form">
                             <div class="input-group"><label for="buyer-name">Nama Lengkap</label><input type="text" id="buyer-name" required></div>
                             <div class="input-group"><label for="buyer-email">Alamat Email</label><input type="email" id="buyer-email" required></div>
                             <div class="input-group"><label for="payment-proof">Unggah Bukti Pembayaran</label><input type="file" id="payment-proof" accept="image/*" required></div>
                             <div id="image-preview-container"><p>Preview Gambar</p><img id="image-preview" src="" alt="Preview Bukti Pembayaran" style="display:none;"></div>
                             <button type="submit" class="btn btn-primary" style="margin-top:1rem;"><i class="fab fa-whatsapp"></i> Konfirmasi via WhatsApp</button>
                         </form>
                     </div>
                 </div>
            </div>

            <div id="page-keys" class="page">
                <div class="page-header"><h2>Manajemen Kunci API</h2><p>Masukkan dan simpan Kunci API Anda di sini. Kunci disimpan di browser Anda.</p></div>
                <div class="disclaimer-box"><strong>Perhatian:</strong> Kunci API Anda disimpan secara lokal di browser (Local Storage). Jangan bagikan kunci ini kepada siapa pun.</div>
                <div class="form-section">
                    <h3><i class="fa-solid fa-key"></i> Kunci Anda</h3>
                    <div class="grid">
                        <div class="input-group"><label for="cohere-key">Cohere API Key</label><input type="password" id="cohere-key" placeholder="Masukkan kunci Cohere Anda"></div>
                        <div class="input-group"><label for="stability-key">Stability AI API Key</label><input type="password" id="stability-key" placeholder="Masukkan kunci Stability AI Anda"></div>
                        <div class="input-group"><label for="elevenlabs-key">ElevenLabs API Key</label><input type="password" id="elevenlabs-key" placeholder="Masukkan kunci ElevenLabs Anda"></div>
                        <div class="input-group"><label for="pixabay-key">Pixabay API Key (Opsional)</label><input type="password" id="pixabay-key" placeholder="Masukkan kunci Pixabay Anda"></div>
                    </div>
                    <button id="save-keys-btn" class="btn btn-primary"><i class="fa-solid fa-save"></i> Simpan Kunci</button>
                </div>
            </div>
            
            <div id="page-about" class="page">
                <div class="page-header"><h2>Tentang & Kontak</h2><p>Informasi tentang Nabila Studio Development.</p></div>
                <div class="grid">
                    <div class="form-section">
                        <h3><i class="fa-solid fa-building"></i> Nabila Studio Development</h3>
                        <p style="line-height: 1.8;">Nabila Studio adalah sebuah laboratorium kreatif digital yang berfokus pada pengembangan alat-alat berbasis Kecerdasan Buatan (AI) untuk memberdayakan para kreator, penulis, musisi, dan pemikir di seluruh Indonesia dan dunia.</p>
                        <h4 style="margin-top:1.5rem; margin-bottom:0.5rem; color:var(--primary-glow);">Visi Kami</h4>
                        <p>Mendemokratisasi akses terhadap teknologi AI canggih dalam balutan antarmuka yang mudah digunakan, indah, dan fungsional, sehingga setiap orang dapat mewujudkan imajinasi mereka tanpa batas.</p>
                        <h4 style="margin-top:1.5rem; margin-bottom:0.5rem; color:var(--primary-glow);">Misi Kami</h4>
                        <p>Secara konsisten mengembangkan dan menyempurnakan tool-tool kreatif, menambahkan fitur-fitur inovatif berdasarkan umpan balik pengguna, dan memastikan platform Nabila Studio tetap menjadi yang terdepan dalam teknologi AI generatif.</p>
                        <br>
                        <p>Untuk pertanyaan, dukungan teknis, atau kerjasama, jangan ragu untuk menghubungi kami.</p>
                        <p style="margin-top: 1rem;"><strong><i class="fab fa-whatsapp"></i> Admin WhatsApp:</strong> <a href="https://wa.me/6285810526151" target="_blank" style="color: var(--secondary-glow);">0858-1052-6151</a></p>
                    </div>
                    <div class="form-section">
                        <h3><i class="fa-solid fa-map-marker-alt"></i> Lokasi Kami</h3>
                        <p style="color: var(--text-dark); margin-bottom: 1rem;">Jl. Jaya Raya Menceng jaya 25 Cengkareng barat, Jakarta barat</p>
                        <div id="map-container">
                             <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3967.042138980894!2d106.7130128153721!3d-6.124933995562799!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e6a02f628045a5d%3A0x80f82c8faf0c500e!2sJl.%20Jaya%202b%20No.25%2C%20RT.3%2FRW.9%2C%20Cengkareng%20Bar.%2C%20Kecamatan%20Cengkareng%2C%20Kota%20Jakarta%20Barat%2C%20Daerah%20Khusus%20Ibukota%20Jakarta%2011730!5e0!3m2!1sen!2sid!4v1672825488731!5m2!1sen!2sid" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <a href="https://wa.me/6285810526151?text=Halo%20Admin%20Nabila%20Studio" target="_blank" class="whatsapp-fab"><i class="fab fa-whatsapp"></i></a>

    <script>
    //<![CDATA[
    document.addEventListener('DOMContentLoaded', () => {
        // --- GLOBAL DOM ELEMENTS ---
        const dom = {
            sidebar: document.getElementById('sidebar'),
            menuToggle: document.getElementById('menu-toggle'),
            closeMenu: document.getElementById('close-menu'),
            navLinks: document.querySelectorAll('.nav-link'),
            apiStatusList: document.getElementById('api-status-list'),
            // API Keys
            cohereKeyInput: document.getElementById('cohere-key'),
            stabilityKeyInput: document.getElementById('stability-key'),
            elevenlabsKeyInput: document.getElementById('elevenlabs-key'),
            pixabayKeyInput: document.getElementById('pixabay-key'),
            saveKeysBtn: document.getElementById('save-keys-btn'),
            // Novel Writer
            writerGenerateBtn: document.getElementById('writer-generate-btn'),
            writerContinueBtn: document.getElementById('writer-continue-btn'),
            writerOutput: document.getElementById('writer-output'),
            writerStyleSelect: document.getElementById('writer-style'),
            // Wheel of Fortune
            wheel: document.getElementById('wheel'),
            spinBtn: document.getElementById('spin-btn'),
            totalScoreDisplay: document.getElementById('total-score'),
            // Podcast
            podcastScriptBtn: document.getElementById('podcast-script-btn'),
            podcastGenerateBtn: document.getElementById('podcast-generate-btn'),
            podcastVoiceSelect: document.getElementById('podcast-voice'),
            podcastMusicInput: document.getElementById('podcast-music'),
            podcastAudioPlayer: document.getElementById('podcast-audio-player'),
            podcastPlaceholder: document.getElementById('podcast-placeholder'),
            // Image Gen
            imageGenerateBtn: document.getElementById('image-generate-btn'),
            imageOutputArea: document.getElementById('image-output-area'),
            // Payment
            paymentForm: document.getElementById('payment-form'),
            paymentProofInput: document.getElementById('payment-proof'),
            imagePreview: document.getElementById('image-preview'),
            imagePreviewContainer: document.getElementById('image-preview-container'),
        };

        // --- GLOBAL APP STATE ---
        let state = {
            story: { fullStoryContext: "", currentChapterNumber: 1, style: "" },
            podcast: { script: "", voiceId: "", audioUrl: null, musicUrl: null },
            wheel: { spinning: false, currentScore: 0, rotation: 0 },
            apiKeys: { cohere: '', stability: '', elevenlabs: '', pixabay: '' }
        };

        // --- WHEEL OF FORTUNE SETUP ---
        const prizes = [
            { name: "Boxing Glove", value: 50, icon: "https://img.icons8.com/emoji/48/boxing-glove-emoji.png" },
            { name: "Badminton", value: 20, icon: "https://img.icons8.com/emoji/48/badminton-emoji.png" },
            { name: "Bullseye", value: 100, icon: "https://img.icons8.com/emoji/48/bullseye.png" },
            { name: "Chess Pawn", value: 75, icon: "https://img.icons8.com/emoji/48/chess-pawn.png" },
            { name: "Japanese Dolls", value: 500, icon: "https://img.icons8.com/emoji/48/japanese-dolls.png" },
            { name: "Kite", value: 1000, icon: "https://img.icons8.com/emoji/48/kite-.png" },
            { name: "Nesting Dolls", value: 2000, icon: "https://img.icons8.com/emoji/48/nesting-dolls.png" },
            { name: "Teddy Bear", value: 3000, icon: "https://img.icons8.com/emoji/48/teddy-bear-.png" },
            { name: "Ant", value: 5000, icon: "https://img.icons8.com/emoji/48/ant-emoji.png" },
            { name: "Butterfly", value: 7000, icon: "https://img.icons8.com/emoji/48/butterfly-emoji.png" },
            { name: "Dog Face", value: 9000, icon: "https://img.icons8.com/emoji/48/dog-face.png" },
            { name: "Elephant", value: 10000, icon: "https://img.icons8.com/emoji/48/elephant-emoji.png" },
            { name: "Ewe", value: 12000, icon: "https://img.icons8.com/emoji/48/ewe-emoji.png" },
            { name: "Fly", value: 3000, icon: "https://img.icons8.com/emoji/48/fly-emoji.png" },
            { name: "Fox", value: 15000, icon: "https://img.icons8.com/emoji/48/fox-emoji.png" },
            { name: "Goat", value: 7000, icon: "https://img.icons8.com/emoji/48/goat-emoji.png" },
            { name: "Gorilla", value: 25000, icon: "https://img.icons8.com/emoji/48/gorilla-emoji.png" },
            { name: "Hatching Chick", value: 75000, icon: "https://img.icons8.com/emoji/48/hatching-chick--v2.png" },
            { name: "Hibiscus", value: 20000, icon: "https://img.icons8.com/emoji/48/hibiscus.png" },
            { name: "Kangaroo", value: 6000, icon: "https://img.icons8.com/emoji/48/kangaroo-emoji.png" },
            { name: "Lotus", value: 1000, icon: "https://img.icons8.com/emoji/48/lotus-emoji.png" },
            { name: "Monkey", value: 50000, icon: "https://img.icons8.com/emoji/48/monkey--v1.png" },
            { name: "Mouse", value: 15000, icon: "https://img.icons8.com/emoji/48/mouse-body-emoji.png" },
            { name: "Parrot", value: 3000, icon: "https://img.icons8.com/emoji/48/parrot-emoji.png" },
            { name: "Penguin", value: 30000, icon: "https://img.icons8.com/emoji/48/penguin--v2.png" },
            { name: "Pig", value: 100000, icon: "https://img.icons8.com/emoji/48/pig-emoji.png" },
            { name: "Rose", value: 2000, icon: "https://img.icons8.com/emoji/48/rose-emoji.png" },
            { name: "Sauropod", value: 5000, icon: "https://img.icons8.com/emoji/48/sauropod.png" }
        ];

        const tickSound = new Audio("data:audio/mpeg;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaXRyYXRlOiAzMjBrYnBzAAAAAAAAA//uQxAwoAAAAAAYAAADn/xvZAAAAAAAAD8AJAIAQAAACwAAAAAADIENANkBCPGgYGIAAAABAQAAcAMgAAMEZJEDgAASCQwEwQMAAiVgQjBgwIQAQEGDAAIgQGCBREBEgYMAgiBAYYFIggYMAhIBgYQFMgQGDAISAYGEBDIhBiYgEmJgQRBQAoZBIgYFIgYQCgYcGEAlCiAQRBQUoAhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoZBIgYFIgYQEAoQIEBBQGJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQM//uQxA0YAAAAAAYAAADn/xvZAAAAAAAAD8AJAIAQAAACwAAAAAADIENANkBCPGgYGIAAAABAQAAcAMgAAMEZJEDgAASCQwEwQMAAiVgQjBgwIQAQEGDAAIgQGCBREBEgYMAgiBAYYFIggYMAhIBgYQFMgQGDAISAYGEBDIhBiYgEmJgQRBQAoZBIgYFIgYQCgYcGEAlCiAQRBQUoAhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoZBIgYFIgYQEAoQIEBBQGJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQMoQhIBgYQEMiEAYmIBJgYEEQUAKEASCJiASSJgQRBQM");
        
        function setupWheel() {
            if (!dom.wheel) return;
            const segments = prizes.length;
            const deg = 360 / segments;
            dom.wheel.innerHTML = prizes.map((prize, i) => 
                `<div class="wheel-segment" style="transform: rotate(${i * deg}deg) skewY(${deg - 90}deg);">
                    <img src="${prize.icon}" alt="${prize.name}" class="icon" style="transform: skewY(${90 - deg}deg) rotate(${deg/2}deg) translate(0, -110%) rotate(180deg);" />
                 </div>`
            ).join('');
        }

        function spinWheel() {
            if (state.wheel.spinning || !dom.wheel) return;
            state.wheel.spinning = true;
            dom.spinBtn.disabled = true;

            const randomSpins = Math.floor(Math.random() * 5) + 10; // 10 to 14 full spins
            const randomExtraDeg = Math.floor(Math.random() * 360);
            const totalRotation = (state.wheel.rotation % 360) + (randomSpins * 360) + randomExtraDeg;
            
            state.wheel.rotation = totalRotation;
            dom.wheel.style.transform = `rotate(${totalRotation}deg)`;

            const interval = setInterval(() => { try { tickSound.currentTime = 0; tickSound.play(); } catch(e) {} }, 100);

            setTimeout(() => {
                clearInterval(interval);
                const actualDeg = totalRotation % 360;
                const segmentDeg = 360 / prizes.length;
                const winningIndex = Math.floor((360 - actualDeg + (segmentDeg / 2)) % 360 / segmentDeg);
                const prize = prizes[winningIndex];
                
                state.wheel.currentScore += prize.value;
                localStorage.setItem('wheelScore', state.wheel.currentScore);
                dom.totalScoreDisplay.textContent = state.wheel.currentScore.toLocaleString('id-ID');

                Swal.fire({
                    title: 'Selamat!',
                    html: `Anda mendapatkan <strong>${prize.name}</strong><br>senilai <strong>${prize.value.toLocaleString('id-ID')}</strong> poin!`,
                    imageUrl: prize.icon,
                    imageWidth: 96,
                    imageHeight: 96,
                    imageAlt: prize.name,
                    confirmButtonText: 'Keren!'
                });

                state.wheel.spinning = false;
                dom.spinBtn.disabled = false;
            }, 6000); 
        }

        // --- INITIALIZATION ---
        function init() {
            loadApiKeys();
            updateDashboardStatus();
            setupWheel();
            
            if (dom.totalScoreDisplay) {
                state.wheel.currentScore = parseInt(localStorage.getItem('wheelScore')) || 0;
                dom.totalScoreDisplay.textContent = state.wheel.currentScore.toLocaleString('id-ID');
            }
            
            // --- EVENT LISTENERS ---
            dom.navLinks.forEach(link => link.addEventListener('click', e => { 
                e.preventDefault(); 
                navigateToPage(link.dataset.page, link);
                if (window.innerWidth <= 992) dom.sidebar.classList.remove('open');
            }));
            if (dom.saveKeysBtn) dom.saveKeysBtn.addEventListener('click', () => { saveApiKeys(); updateDashboardStatus(); });
            if (dom.menuToggle) dom.menuToggle.addEventListener('click', () => dom.sidebar.classList.add('open'));
            if (dom.closeMenu) dom.closeMenu.addEventListener('click', () => dom.sidebar.classList.remove('open'));
            if (dom.spinBtn) dom.spinBtn.addEventListener('click', spinWheel);
            if (dom.paymentForm) {
                dom.paymentForm.addEventListener('submit', handlePaymentConfirmation);
                if(dom.paymentProofInput) dom.paymentProofInput.addEventListener('change', handleImagePreview);
            }
        }
        
        // --- KEY MANAGEMENT ---
        function loadApiKeys() {
            state.apiKeys.cohere = localStorage.getItem('cohere-key') || '';
            state.apiKeys.stability = localStorage.getItem('stability-key') || '';
            state.apiKeys.elevenlabs = localStorage.getItem('elevenlabs-key') || '';
            state.apiKeys.pixabay = localStorage.getItem('pixabay-key') || '';
            if (dom.cohereKeyInput) dom.cohereKeyInput.value = state.apiKeys.cohere;
            if (dom.stabilityKeyInput) dom.stabilityKeyInput.value = state.apiKeys.stability;
            if (dom.elevenlabsKeyInput) dom.elevenlabsKeyInput.value = state.apiKeys.elevenlabs;
            if (dom.pixabayKeyInput) dom.pixabayKeyInput.value = state.apiKeys.pixabay;
        }

        function saveApiKeys() {
            localStorage.setItem('cohere-key', dom.cohereKeyInput.value);
            localStorage.setItem('stability-key', dom.stabilityKeyInput.value);
            localStorage.setItem('elevenlabs-key', dom.elevenlabsKeyInput.value);
            localStorage.setItem('pixabay-key', dom.pixabayKeyInput.value);
            loadApiKeys();
            Swal.fire('Sukses', 'Kunci API berhasil disimpan!', 'success');
        }

        function getApiKey(service) {
            return state.apiKeys[service];
        }

        // --- NAVIGATION & UI ---
        window.navigateToPage = (pageId, clickedLink = null) => {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            const targetPage = document.getElementById(pageId);
            if(targetPage) targetPage.classList.add('active');
            
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            const targetLink = clickedLink || document.querySelector(`.nav-link[data-page="${pageId}"]`);
            if(targetLink) targetLink.classList.add('active');
            
            if (pageId === 'page_podcast' && dom.podcastVoiceSelect && dom.podcastVoiceSelect.options.length <= 1) {
                getElevenLabsVoices();
            }
        };

        function updateDashboardStatus() {
            if (!dom.apiStatusList) return;
            dom.apiStatusList.innerHTML = '';
            const services = [
                { name: 'Cohere (Teks)', key: getApiKey('cohere'), page: 'page-writer' },
                { name: 'Stability AI (Gambar)', key: getApiKey('stability'), page: 'page-image' },
                { name: 'ElevenLabs (Suara)', key: getApiKey('elevenlabs'), page: 'page-podcast' }
            ];
            services.forEach(service => {
                const li = document.createElement('li');
                const statusClass = service.key ? 'status-ok' : 'status-missing';
                const statusText = service.key ? 'AKTIF' : 'KOSONG';
                li.innerHTML = `
                    <span>${service.name}</span>
                    ${!service.key ? `<a href="#" onclick="navigateToPage('page-keys')">Isi Kunci</a>` : ''}
                    <span class="api-status-badge ${statusClass}">${statusText}</span>
                `;
                dom.apiStatusList.appendChild(li);
            });
        }
        
        // --- UTILITY FUNCTIONS ---
        window.copyToClipboard = (id) => { 
            const el = document.getElementById(id); 
            if (!el || !el.value) return Swal.fire('Gagal', 'Tidak ada teks untuk disalin.', 'warning'); 
            navigator.clipboard.writeText(el.value)
                .then(() => Swal.fire('Sukses', 'Teks disalin!', 'success'))
                .catch(err => Swal.fire('Error', `Gagal menyalin: ${err}`, 'error'));
        };

        window.downloadTextFile = (id, filename) => { 
            const el = document.getElementById(id); 
            if (!el || !el.value) return Swal.fire('Gagal', 'Tidak ada konten untuk diunduh.', 'warning'); 
            const blob = new Blob([el.value], { type: 'text/plain;charset=utf-8' }); 
            const link = document.createElement('a'); 
            link.href = URL.createObjectURL(blob); 
            link.download = filename; 
            document.body.appendChild(link); 
            link.click(); 
            document.body.removeChild(link);
        };

        // --- API WRAPPERS ---
        async function callCohere(preamble, message) {
            const key = getApiKey('cohere');
            if (!key) throw new Error('Kunci API Cohere tidak ditemukan.');
            
            const response = await fetch("https://api.cohere.com/v1/chat", {
                method: 'POST',
                headers: { 
                    'Content-Type': 'application/json', 
                    'Authorization': `Bearer ${key}` 
                },
                body: JSON.stringify({ message, preamble, model: 'command-r-plus' }),
            });

            if (!response.ok) {
                const err = await response.json();
                throw new Error(`Cohere API Error: ${err.message || response.statusText}`);
            }
            const data = await response.json();
            return data.text;
        }

        // --- AI IMAGE GENERATOR ---
        window.generateImage = async () => {
            const prompt = document.getElementById('image-prompt').value;
            const key = getApiKey('stability');
            if (!key) return Swal.fire('Kunci Hilang', 'Harap masukkan Kunci API Stability AI di halaman Manajemen Kunci.', 'warning');
            if (!prompt) return Swal.fire('Input Kosong', 'Harap masukkan deskripsi gambar.', 'warning');

            dom.imageGenerateBtn.disabled = true;
            dom.imageOutputArea.innerHTML = `<p>Membuat gambar... Harap tunggu.</p>`;
            Swal.fire({ title: 'Membuat Gambar...', html: 'AI sedang melukis mahakarya Anda...', allowOutsideClick: false, didOpen: () => Swal.showLoading() });

            try {
                const formData = new FormData();
                formData.append('prompt', prompt);
                formData.append('output_format', 'png');

                const response = await fetch('https://api.stability.ai/v2beta/stable-image/generate/core', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${key}`,
                        'Accept': 'image/*'
                    },
                    body: formData
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`Stability AI Error: ${errorText}`);
                }

                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                dom.imageOutputArea.innerHTML = `<img src="${url}" alt="${prompt}">`;
                Swal.close();
            } catch (error) {
                Swal.fire('Error', `Gagal membuat gambar: ${error.message}`, 'error');
                dom.imageOutputArea.innerHTML = `<p>Gagal membuat gambar. Coba lagi.</p>`;
            } finally {
                dom.imageGenerateBtn.disabled = false;
            }
        };

        window.downloadImage = () => {
            const img = dom.imageOutputArea.querySelector('img');
            if (!img) return Swal.fire('Gagal', 'Tidak ada gambar untuk diunduh.', 'warning');
            const link = document.createElement('a');
            link.href = img.src;
            link.download = 'nabila-studio-image.png';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        };
        
        // --- AI NOVEL WRITER (PRO VERSION) ---
        const writerStyles = {
            "Enny Arrow": "Gaya tulisan Anda harus liris, puitis, dan sangat emotif. Fokus pada perasaan mendalam karakter, dialog yang menyentuh, dan deskripsi suasana yang membangkitkan emosi. Alur cerita bisa jadi tidak linear dan lebih mengutamakan perjalanan batin.",
            "Sandra Brown": "Anda harus menulis dengan gaya suspense yang tinggi. Ciptakan alur cerita yang cepat, penuh ketegangan, dan berikan banyak plot twist yang tidak terduga. Hubungan antar karakter, terutama romansa, harus terjalin di tengah bahaya dan konflik.",
            "Asmaraman S. Kho Ping Hoo": "Gaya Anda adalah cersil (cerita silat) klasik. Gunakan bahasa yang sedikit puitis dan formal. Deskripsikan jurus-jurus silat dengan detail, bangun intrik kerajaan atau perguruan, dan selipkan falsafah hidup dan kehormatan ksatria.",
            "Tere Liye": "Fokus pada cerita yang imajinatif, menyentuh hati, dan mengandung pesan moral yang kuat. Gunakan bahasa yang sederhana namun efektif dalam menyampaikan emosi dan pelajaran hidup.",
            "Dee Lestari": "Gaya Anda harus intelektual dan kompleks. Gabungkan unsur sains, spiritualitas, dan filsafat ke dalam narasi. Buat plot berlapis dengan karakter-karakter yang memiliki pemikiran mendalam.",
            "Pramoedya Ananta Toer": "Gaya Anda adalah realisme sosialis. Deskripsikan latar sejarah dan sosial dengan sangat detail dan akurat. Cerita harus fokus pada perjuangan manusia melawan ketidakadilan sistem dan kekuasaan.",
            "Agatha Christie": "Anda adalah master misteri. Bangun plot yang cerdas dan penuh teka-teki. Fokus pada petunjuk-petunjuk kecil, alibi, dan psikologi para tersangka. Ungkap pembunuhnya di akhir cerita dengan cara yang mengejutkan namun logis.",
            "J.K. Rowling": "Fokus pada pembangunan dunia (world-building) yang kaya dan detail. Ciptakan sistem sihir yang konsisten, karakter yang mudah dicintai, dan plot petualangan yang epik antara kebaikan dan kejahatan.",
            "Stephen King": "Anda adalah master horor psikologis. Gali ketakutan terdalam manusia. Bangun suspense secara perlahan, fokus pada keanehan di hal-hal yang biasa, dan ciptakan karakter-karakter yang cacat secara psikologis.",
            "Default": "Gaya tulisan Anda jelas, deskriptif, dan fokus pada alur cerita yang menarik dengan pengembangan karakter yang baik."
        };

        window.generateNovel = async () => {
            const prompt = document.getElementById('writer-prompt').value;
            if (!prompt) return Swal.fire('Input Kosong', 'Harap masukkan premis novel Anda.', 'warning');
            if (!getApiKey('cohere')) return Swal.fire('Kunci Hilang', 'Harap masukkan Kunci API Cohere di halaman Manajemen Kunci.', 'warning');
            
            state.story.style = dom.writerStyleSelect.value;
            dom.writerGenerateBtn.disabled = true;
            Swal.fire({ title: 'Membuat Cerita...', html: 'AI sedang membangun dunia dan karakter untuk Anda...', allowOutsideClick: false, didOpen: () => Swal.showLoading() });
            
            try {
                const styleInstruction = writerStyles[state.story.style];
                const preamble = `Anda adalah seorang penulis novel master yang mampu meniru berbagai gaya. Untuk permintaan ini, Anda akan menulis dengan gaya ${state.story.style}. ${styleInstruction} Anda akan menulis bab pertama dari sebuah cerita berdasarkan premis yang diberikan. Targetkan panjang bab ini antara 4000 hingga 6000 kata. Pastikan bab ini memperkenalkan karakter utama, setting, dan konflik awal dengan baik. Akhiri bab dengan kalimat yang membuat pembaca penasaran.`;
                const result = await callCohere(preamble, `Premis novel: ${prompt}`);
                
                state.story.fullStoryContext = `Premis Awal: ${prompt}\n\nGaya Penulis: ${state.story.style}\n\n--- BAB 1 ---\n\n${result}`;
                state.story.currentChapterNumber = 1;
                dom.writerOutput.value = `--- BAB 1 ---\n\n${result}`;
                dom.writerContinueBtn.style.display = 'inline-block';
                dom.writerContinueBtn.textContent = `Lanjutkan ke Bab 2`;
                Swal.fire('Bab 1 Selesai!', 'Novel Anda telah dimulai.', 'success');
            } catch (error) {
                Swal.fire('Error', `Gagal membuat novel: ${error.message}`, 'error');
            } finally {
                dom.writerGenerateBtn.disabled = false;
            }
        };

        window.continueNovel = async () => {
            dom.writerContinueBtn.disabled = true;
            state.story.currentChapterNumber++;
            Swal.fire({ title: `Menulis Bab ${state.story.currentChapterNumber}...`, html: 'AI sedang melanjutkan kisah...', allowOutsideClick: false, didOpen: () => Swal.showLoading() });

            try {
                const styleInstruction = writerStyles[state.story.style];
                const preamble = `Anda adalah penulis novel yang melanjutkan cerita yang sudah ada dengan gaya ${state.story.style}. ${styleInstruction} Berdasarkan konteks cerita sejauh ini, tulis bab selanjutnya. Jaga konsistensi karakter, plot, dan gaya penulisan. Buat bab yang menarik dan targetkan panjangnya antara 4000 hingga 6000 kata.`;
                const message = `Konteks Cerita Sejauh Ini:\n\n${state.story.fullStoryContext}\n\nInstruksi: Lanjutkan cerita dengan menulis Bab ${state.story.currentChapterNumber}. Jangan ulangi judul bab di dalam teks.`;
                const nextChapter = await callCohere(preamble, message);
                
                const chapterHeader = `\n\n\n--- BAB ${state.story.currentChapterNumber} ---\n\n`;
                const fullText = dom.writerOutput.value + chapterHeader + nextChapter;
                
                dom.writerOutput.value = fullText;
                state.story.fullStoryContext = fullText;
                dom.writerOutput.scrollTop = dom.writerOutput.scrollHeight;
                dom.writerContinueBtn.textContent = `Lanjutkan ke Bab ${state.story.currentChapterNumber + 1}`;
                Swal.close();
            } catch (error) {
                Swal.fire('Error', `Gagal melanjutkan novel: ${error.message}`, 'error');
                state.story.currentChapterNumber--; // Revert chapter count on error
            } finally {
                dom.writerContinueBtn.disabled = false;
            }
        };

        // --- STUDIO PODCAST ---
        window.generatePodcastScript = async () => {
            const script = document.getElementById('podcast-script').value;
            if(!script) return Swal.fire('Naskah Kosong', 'Harap isi naskah podcast terlebih dahulu.', 'warning');
            
            state.podcast.script = script;
            dom.podcastGenerateBtn.disabled = false;
            dom.podcastVoiceSelect.disabled = false;
            dom.podcastMusicInput.disabled = false;
            await getElevenLabsVoices();
            Swal.fire('Sukses', 'Naskah siap. Silakan pilih suara dan musik, lalu generate audio.', 'success');
        };

        async function getElevenLabsVoices() {
            const key = getApiKey('elevenlabs');
            if (!key || !dom.podcastVoiceSelect) return;
            
            dom.podcastVoiceSelect.innerHTML = '<option>Memuat suara...</option>';
            try {
                const response = await fetch('https://api.elevenlabs.io/v1/voices', {
                    headers: { 'xi-api-key': key }
                });
                if (!response.ok) throw new Error('Gagal mengambil daftar suara.');
                const data = await response.json();
                
                dom.podcastVoiceSelect.innerHTML = '<option value="">Pilih Suara...</option>';
                data.voices.forEach(voice => {
                    const option = document.createElement('option');
                    option.value = voice.voice_id;
                    option.textContent = `${voice.name} (${voice.labels.gender}, ${voice.labels.accent})`;
                    dom.podcastVoiceSelect.appendChild(option);
                });
            } catch (error) {
                dom.podcastVoiceSelect.innerHTML = '<option>Gagal memuat suara.</option>';
                Swal.fire('Error Suara', error.message, 'error');
            }
        }

        window.generatePodcastAudio = async () => {
            state.podcast.voiceId = dom.podcastVoiceSelect.value;
            if (!state.podcast.script) return Swal.fire('Error', 'Naskah podcast kosong.', 'error');
            if (!state.podcast.voiceId) return Swal.fire('Error', 'Harap pilih suara AI.', 'error');
            const key = getApiKey('elevenlabs');
            if (!key) return Swal.fire('Kunci Hilang', 'Harap masukkan Kunci API ElevenLabs.', 'warning');

            dom.podcastGenerateBtn.disabled = true;
            Swal.fire({ title: 'Membuat Audio...', html: 'Mohon tunggu, AI sedang merekam podcast...', allowOutsideClick: false, didOpen: () => Swal.showLoading() });
            
            try {
                const speechUrl = await generateSpeech(key, state.podcast.script, state.podcast.voiceId);
                dom.podcastAudioPlayer.src = speechUrl;
                dom.podcastAudioPlayer.style.display = 'block';
                dom.podcastPlaceholder.style.display = 'none';
                Swal.fire('Sukses!', 'Audio podcast berhasil dibuat.', 'success');
            } catch (error) {
                Swal.fire('Error', `Gagal membuat audio: ${error.message}`, 'error');
            } finally {
                dom.podcastGenerateBtn.disabled = false;
            }
        };

        async function generateSpeech(apiKey, text, voiceId) {
            const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'xi-api-key': apiKey,
                    'Accept': 'audio/mpeg'
                },
                body: JSON.stringify({
                    text: text,
                    model_id: 'eleven_multilingual_v2',
                    voice_settings: { stability: 0.5, similarity_boost: 0.75 }
                })
            });
            if (!response.ok) throw new Error('Gagal mengonversi teks ke suara.');
            const blob = await response.blob();
            return URL.createObjectURL(blob);
        }

        // --- GENERIC CONTENT GENERATOR (QA, Lyrics, etc.) ---
        window.generateGeneric = async (type) => {
            const promptEl = document.getElementById(`${type}-prompt`);
            const outputEl = document.getElementById(`${type}-output`);
            const prompt = promptEl.value;
            if (!prompt) return Swal.fire('Input Kosong', 'Harap isi kolom input.', 'warning');
            if (!getApiKey('cohere')) return Swal.fire('Kunci Hilang', 'Harap masukkan Kunci API Cohere.', 'warning');

            Swal.fire({ title: 'Memproses...', html: 'AI sedang berpikir...', allowOutsideClick: false, didOpen: () => Swal.showLoading() });
            outputEl.value = "Memproses...";
            
            const preambles = {
                qa: "Anda adalah asisten AI yang cerdas dan informatif. Jawab pertanyaan berikut dengan jelas dan akurat.",
                lyrics: "Anda adalah seorang penulis lagu berbakat. Buatlah lirik lagu berdasarkan deskripsi berikut. Pastikan ada bagian intro, verse, chorus, dan bridge.",
                poem: "Anda adalah seorang penyair. Ciptakan sebuah puisi yang indah dan menyentuh berdasarkan ide berikut.",
                ramalan: "Anda adalah seorang peramal dengan gaya yang menghibur dan sedikit misterius. Berikan ramalan berdasarkan permintaan berikut. Ingat, ini hanya untuk hiburan."
            };

            try {
                const result = await callCohere(preambles[type], prompt);
                outputEl.value = result;
                Swal.close();
            } catch (error) {
                Swal.fire('Error', `Gagal menghasilkan konten: ${error.message}`, 'error');
                outputEl.value = `Gagal: ${error.message}`;
            }
        };

        // --- PAYMENT LOGIC ---
        function handleImagePreview() {
            if (!dom.paymentProofInput || !dom.imagePreview || !dom.imagePreviewContainer) return;
            const file = dom.paymentProofInput.files[0];
            if (file) {
                const reader = new FileReader();
                dom.imagePreview.style.display = 'block';
                if(dom.imagePreviewContainer.firstElementChild) dom.imagePreviewContainer.firstElementChild.style.display = 'none';
                reader.onload = e => { dom.imagePreview.src = e.target.result; };
                reader.readAsDataURL(file);
            }
        }
        function handlePaymentConfirmation(e) {
            e.preventDefault();
            const name = document.getElementById('buyer-name').value;
            const email = document.getElementById('buyer-email').value;
            const proof = document.getElementById('payment-proof').files[0];
            if (!name || !email || !proof) {
                return Swal.fire('Error', 'Harap isi semua kolom dan unggah bukti pembayaran.', 'error');
            }
            const msg = `Halo Admin Nabila Studio,\n\nKonfirmasi Pembelian Kunci API Premium.\n\n*Detail:*\nNama: *${name}*\nEmail: *${email}*\n\nBukti pembayaran terlampir.`;
            window.open(`https://wa.me/6285810526151?text=${encodeURIComponent(msg)}`, '_blank');
            Swal.fire({ 
                icon: 'success', 
                title: 'Redirect ke WhatsApp!', 
                html: '<b>PENTING:</b> Jangan lupa <b>melampirkan bukti pembayaran</b> di chat WhatsApp yang terbuka.', 
                confirmButtonText: 'Mengerti' 
            });
        }
        
        // --- START THE APP ---
        init();
    });
    //]]>
    </script>
</body>
</html>
